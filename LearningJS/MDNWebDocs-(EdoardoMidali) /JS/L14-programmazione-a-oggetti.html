<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>L14: Programmazione a oggetti</title>
  </head>
  <body>
    <script>
      // 1. Perché e cosa è OOP (object oriented programming)
      // 2. Definire un object template

      // prendere oggetti dalla realtà e portare dati nel nostro programma
      // per correlare i dati in modo logico e usarli con una certa facilità
      // programmi complessi ma più semplici da interconnettere fra di loro
      // il codice è anche + utilizzabile, leggibile etc
      // creiamo per es l'oggetto db e ci si accede
      // la divisione non è per file coerenti a per oggetti coerenti

      // primo: definire un template
      // astrazione: capisco quali cose ci sono in comune
      // se voglio lavorare su studenti e insegnanti, il fatto che sono persone
      // entità diverse ma entrambe persone
      // creo un OGGETTO anche detto CLASSE che si chiama persona e ha caratteristiche in comune
      //es nome, cognome, anni, gender, interessi, bio

      // quando abbiamo una persona possiamo creare delle istanze dell'oggetto
      // la classe, con il suo template è lo stampino originale
      // quando creo l'istanza genero infiniti esempi di possibile
      // il costruttore è la funzione che permette di fare ciò

      // se poi volessimo avere una classe, oggetto per l'entità reale insegnate
      // dovremmo creare un'altra classe con dati simili
      // non possiamo scrivere tutto ogni volta
      // quindi creaiamo una child class a partire da quella persona
      // quindi eredita tutto
      // persona ha tutte le cose di cui parlavamo prima
      // l'insegnante che è classe figlia eredita tutto da persona
      // posso accedere all'insegnante perché ha un nome e un cognome

      // 3. Costruttori e istanze di un oggetto
      // questo è un costruttore
      // funzione che ci permette di costruire un oggetto o una persona
      // il nome va messo in maiuscolo
      // i parametri della funzione sono simbolici
      // usiamo semplicemente una dicitura coerente
      function Persona(nome, cognome, eta, genere, interessi) {
        this.nome = nome;
        this.cognome = cognome;
        this.eta = eta;
        this.genere = genere;
        this.interessi = interessi;
        // questo è un metodo
        this.bio = function () {
          // li sotto abbiamo il ternary operator
          // simile a if inline
          console.log(
            `${this.nome} ${this.cognome} è ${
              this.genere == 'Maschio' ? ' un ragazzo' : 'una ragazza'
            } di ${this.eta} anni a cui piace ${this.interessi.join(', ')}`
          );
        };
        // altro metodo
        this.saluta = function () {
          console.log(`Ciao sono ${this.nome}`);
        };
      }

      //istanze
      //le istanze diverse sono fatte a partire da uno stampino
      const persona1 = new Persona('Luca', 'Rossi', 23, 'Maschio', [
        'calcio',
        'basket',
      ]);
      const persona2 = new Persona('Anna', 'Verdi', 19, 'Ragazza', [
        'letteratura',
        'masterchef',
        'musica',
      ]);

      console.log(persona1); // le proprietà vengono stampate in ordine alfabetico
      console.log(persona2);

      persona1.saluta();
      persona2.saluta();

      persona1.bio();
      persona2.bio();

      // AGGIUNTE
      // FACTORY FUNCTION
      // creazione di oggetti (definisco una sorta di template)
      // f personalizzata che genera un oggetto
      // (usare il return)
      function robotFactory(model, mobile) {
        return {
          model: model,
          mobile: mobile,
          beep() {
            console.log('Beep Boop');
          },
        };
      }

      const newRobot = robotFactory('P-501', false);

      // DESCRUCTORING - ES6
      // property value shorthand
      // NO: name: name
      // YES: name,
      function person(name, surname, interUno, interDue, paese, pNascita, aNascita) {
        return {
          name,
          surname,
          interessi: [interUno, interDue],
          anagrafica: {
            paese,
            pNascita,
            aNascita
          },
          saluto() {
            console.log(`Ciao, mi chiamo ${name} ${surname}`);
          },
        };
      }

      const e = person('Emma', 'Franchino', 'viaggiare', 'dormire', 'Brusnengo', 'Biella', 2001);
      const m = person('Mariarosa', 'Tirelli', 'pulire', 'urlare', 'Montirone', 'Brescia', 1967);
      console.log(e);
      console.log(e.surname);
      console.log(m);
      e.saluto();

      // DESTRUCTORED ASSIGNMENT
      // per accedere a un valore
      // dentro {} chiamo la variabile con il nome della key
      // const interessi = e.interessi;
      const { interessi } = e;
      console.log(interessi);
      const { surname } = m;
      console.log(surname);
      const { aNascita } = e.anagrafica;
      console.log(aNascita);

      // METHODS
      // hasOwnProperty(), valueOf(), Object.assign(), Object.entries(), Object.keys()
      const eProps = Object.keys(e); 
      console.log(eProps); // Output: nomi delle key
      const eEntries = Object.entries(e);
      console.log(eEntries);  // Output: array (che può contenere altri array) con dentro coppie chiave, valore
      const eNewProps = {facoltà: {nome: 'Psicologia', anno: 2, anniPrevistri: 3}};
      const eNew = Object.assign(eNewProps, e);
      console.log(eNew);
    </script>
  </body>
</html>
